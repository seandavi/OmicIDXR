<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Query the OmicIDX genomic data index API • OmicIDXR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Query the OmicIDX genomic data index API">
<meta property="og:description" content="More about what it does (maybe more than one line)
    Use four spaces when indenting paragraphs within the Description.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">OmicIDXR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/omicidx_intro.html">Playing with OmicIDX</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">

<div id="omicidxr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#omicidxr" class="anchor"></a>OmicIDXR</h1></div>
<p>This package facilitates access to nearly complete metadata from the world’s largest genomics data repositories. Through bulk access to these metadata, we hope to:</p>
<ul>
<li>Ease bulk metadata processing, such as natural language processing or phenotype predicion</li>
<li>Allow creation of custom collections of samples or experiments for secondary analysis or metaanalysis</li>
<li>Support bulk reprocessing of genomics data</li>
<li>Provide a platform for enhancing metadata</li>
<li>Offer high-performance API access as well as bulk downloads of processed genomic metadata</li>
</ul>
</div>
<div id="introduction-to-the-omicidx-api" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction-to-the-omicidx-api" class="anchor"></a>Introduction to the OmicIDX API</h1>
<p>OmicIDX parses and then serves public genomics repository metadata. These metadata are growing quickly, updated often, and are now very large when taken as a whole. Because of the interrelated nature of the metadata and the myriad approaches and use cases that exist, including search, bulk download, and even data mining, we serve the data via a GraphQL endpoint.</p>
<p>Currently, OmicIDX contains the SRA and Biosample metadata sets. These overlap with each other, but SRA metadata contains deeper metadata than Biosample data on the same samples. Biosample, on the other hand, contains many more samples and currently includes metadata about a subset of NCBI GEO, all SRA samples, and some additional samples from projects like Genbank.</p>
</div>
<div id="graphql-for-accessing-omicidx-data" class="section level1">
<h1 class="hasAnchor">
<a href="#graphql-for-accessing-omicidx-data" class="anchor"></a>GraphQL for accessing OmicIDX data</h1>
<p><a href="https://graphql.org/">GraphQL</a> is a query language for APIs and a runtime for fulfilling those queries with existing data. GraphQL provides a complete and understandable description of the data in the API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools.</p>
<p>GraphQL has only a <em>single url</em>, called the endpoint, which allows access to all data in the API. GraphQL is also a <em>query language</em>. It is the GraphQL query that is submitted to the GraphQL endpoint that results in data being returned.</p>
<div id="what-is-a-graphql-query" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-a-graphql-query" class="anchor"></a>What is a GraphQL query?</h2>
<p>A GraphQL query looks a bit like JSON, except without quotes or commas. Here is an example GraphQL query for a fictitious GraphQL API.</p>
<pre><code>{
  allCharacters {
    name
  }
}</code></pre>
<p>If we had a server that contained Star Wars trivia, the response from the server might look like:</p>
<pre><code>{ "data": {
    "allCharacters": [
      {
        "name":"Luke"
      },
      {
        "name": "Darth"
      },
      ...
    ]
  }
}</code></pre>
<p>If we changed the query to:</p>
<pre><code>{
  allCharacters {
    name
    mass
  }
}</code></pre>
<p>the response would now look like:</p>
<pre><code>{ "data": {
    "allCharacters": [
      {
        "name":"Luke",
        "mass": 80
      },
      {
        "name": "Darth",
        "mass": 140
      },
      ...
    ]
  }
}</code></pre>
</div>
<div id="how-do-i-know-what-is-in-the-graphql-endpoint" class="section level2">
<h2 class="hasAnchor">
<a href="#how-do-i-know-what-is-in-the-graphql-endpoint" class="anchor"></a>How do I know what is in the GraphQL endpoint?</h2>
<p>The GraphQL <strong>schema</strong> describes the data model(s) contained in the GraphQL endpoint. GraphQL is strongly typed, has the concept of relationships between data types, and is self-documenting. In fact, one can use the GraphQL endpoint to discover what is in the endpoint. I will not go into the details right now, but this <em>introspection</em> capability makes possible some powerful tooling. One of the most ubiguitous is the so-called <strong>Graph<em>i</em>QL</strong> (note the <em>i</em> in the name) tool.</p>
</div>
</div>
<div id="play-with-omicidx-graphql" class="section level1">
<h1 class="hasAnchor">
<a href="#play-with-omicidx-graphql" class="anchor"></a>Play with OmicIDX Graphql</h1>
<p>Navigate to <a href="http://graphql-omicidx.cancerdatasci.org/graphiql">Graph<em>i</em>QL</a> and follow along with the video (no sound).[^urlchange]</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1Zg_Fbt56kc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="querying-omicidx-programmatically" class="section level1">
<h1 class="hasAnchor">
<a href="#querying-omicidx-programmatically" class="anchor"></a>Querying OmicIDX programmatically</h1>
<p>GraphQL is quite easy to work with programmatically. All queries are made via a post request to the GraphQL endpoint. The POST request needs to be JSON encoded and must include the <code>"query"</code> key. A simple example of the JSON for a basic query might look like:</p>
<pre><code>{ "query": "{ heros { name weight } }"}</code></pre>
<p>Note that the query string (ie., <code>"{ heros { name weight } }"</code>) is just a string. It is not formated as JSON itself.</p>
<ul>
<li>Current OmicIDX GraphQL endpoint[^urlchange]: <a href="http://graphql-omicidx.cancerdatasci.org/graphql" class="uri">http://graphql-omicidx.cancerdatasci.org/graphql</a>
</li>
</ul>
<p>For example, let us get the first 500 SRA studies (500 is a limit to the number of results that we can retrieve in one go. The GraphQL might look like this:</p>
<pre><code>{
  allSraStudies {
    edges {
      node {
        accession
        title
        abstract
      }
    }
  }
}</code></pre>
<p>You know that you can copy this query into the Graph<em>i</em>QL browser and get results. How about using <a href="https://curl.haxx.se/">curl</a>? Note that I am doing some gymnastics below to make this work in one command line. In practice, one would probably save the GraphQL query as a file (in json format) and then post that file[^curlnote].</p>
<pre class="{bash}"><code>curl --silent \
  -X POST \
  -H "Content-Type: application/json" \
  http://graphql-omicidx.cancerdatasci.org/graphql \
  --data @- &lt;&lt; EOF

  { "query":"{
  allSraStudies(first: 1) {
    edges {
      node {
        accession
        title
        abstract
      }
    }
  }
}"
}
 EOF</code></pre>
<p>Note that the return value is simply JSON. All our normal tools for working with JSON are available to us to process and manipulate the results.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php">MIT</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sean Davis <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8991-6458" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Sean Davis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
